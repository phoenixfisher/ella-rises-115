<div class="landing">
    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 2rem;">
        <div>
            <h1>Milestones</h1>
        </div>
    </div>

    <form action="/milestones" method="GET" style="background: #fff; padding: 10px 12px; border: 1px solid var(--pink-light); border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.05); display: flex; gap: 10px; align-items: center; margin-bottom: 1.25rem; flex-wrap: wrap;">
        <input
            type="text"
            name="search"
            value="<%= (typeof search !== 'undefined' && search) ? search : '' %>"
            placeholder="Search milestones..."
            style="flex: 1; padding: 10px 12px; border: 1px solid #dcdde3; border-radius: 8px; box-sizing: border-box; background: #fafbff;"
        />
        <div style="display: flex; gap: 8px; flex-wrap: wrap; align-items: center;">
            <% if (typeof search !== 'undefined' && search) { %>
                <a href="/milestones" class="btn btn-soft btn-sm" style="margin: 0; text-decoration: none;">Clear</a>
            <% } %>
            <button type="submit" class="btn btn-rose" style="margin: 0; width: auto;">Search</button>
        </div>
    </form>

    <% if (!milestones || milestones.length === 0) { %>
        <div class="hero-panel" style="padding: 16px; border: 1px solid var(--pink-light);">
            No milestones found.
        </div>
    <% } else { %>
        <div class="pillar-grid">
            <% milestones.forEach(ms => { %>
                <a class="hero-panel" href="/milestones/<%= encodeURIComponent(ms.milestonetitle) %>" style="display: flex; flex-direction: column; gap: 10px; text-decoration: none; color: inherit;">
                    <h3 style="margin: 0; color: var(--charcoal); min-height: 48px; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden;">
                        <%= ms.milestonetitle %>
                    </h3>
                    <p style="margin: 0; color: var(--charcoal); opacity: 0.85;">Occurrences tracked:</p>
                    <p style="margin: 0; color: var(--charcoal); opacity: 0.8; font-size: 0.95rem;">
                        <strong style="color: var(--rose-deep); font-size: 1.05rem;"><%= ms.participantcount %></strong> participants
                    </p>
                </a>
            <% }) %>
        </div>
    <% } %>
</div>
